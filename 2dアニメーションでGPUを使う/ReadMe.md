# 2D アニメーションで GPU を使用

通常、ブラウザに表示する gif 等のアニメーション画像は CPU で描画します。  
滑らかに描画できないアニメーションの場合、改善策として GPU を使うことでレンダリングを効率的にしたいという考えが出てくると思います。  
GPU を使用して描画する場合、レイヤーが必要になります。
GPU の計算対象とするリソースのみ載っているレイヤーを GPU でレンダリングし、元のページと合成します。  
ちなみに、SVG アニメーションの場合は、GPU アクセラレーションはサポートされていないようです。

■GPU レンダリング確認方法  
Chrome DevTool の「三点リーダー」→「その他ツール」→「レイヤ」を開き、対象リソースが別レイヤになっているか確認出来れば、GPU が使われています。

■translateZ(0)

以前は、translateZ(0)で、ブラウザに 対象リソースを 3D オブジェクトと騙して、GPU を使わせる方法がメジャーだったようですが、  
現在はベストプラクティスではないようです。

```css
.taget {
  transform: translateZ(0);
}
```

■will-change  
will-change プロパティはブラウザにレンダリングのヒントを与えます。
近々変化する CSS プロパティを指定して、事前に変化に備えた最適化を可能とします。アニメーションやスクロール等にも利用できます。
以下は上記 css と同じ意味を持ちますが、ハッキーではありません。  
ただ、最適化のためのヒントを与える機能なので、明示的にどのような動作になるか説明が不十分ですし、ブラウザによって動きも変わる可能性があり、個人的に気持ち悪さを感じます。

```css
.target {
  will-change: transform, opacity;
}
```

続きを書こうと思ったら、とても参考になる記事があったので、
以下を参照してください。

[will-change で目指す 60fps のぬるぬる CSS アニメーション](https://qiita.com/yuneco/items/f07d60ab21dd1de9a51d)  
[デモページ](https://css-anime.firebaseapp.com/)
