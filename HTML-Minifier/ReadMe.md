# HTML Minifier

HTML, CSS, JavaScript の軽量化ツールである HTML Minifier を使ってみます。  
Webpack 等の著名な OSS でも使用されています。今回は HTML の軽量化を試します。

[手順]

- 1.HTML Minifier をインストール

```
npm -D i html-minifier
```

- 2.Minify のデフォルト実行

```
npx html-minifier index.html -o index.min.html
```

デフォルトだと Minify はほとんどで来ていません。
![_C__Users_user_OneDrive_%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97_diff htm](https://user-images.githubusercontent.com/49807271/195983716-aa83817e-3326-4dba-aac3-5e16fdd8dc78.png)

- 3.[公式の設定ファイル](https://github.com/kangax/html-minifier/blob/gh-pages/sample-cli-config-file.conf)を引数として渡します

```
npx html-minifier index.html -o index.min.html -c sample-cli-config-file.conf
```

コメントが削除され、ワンライナーになっています。29%程度軽量化できました。
![_C__Users_user_OneDrive_%E3%83%87%E3%82%B9%E3%82%AF%E3%83%88%E3%83%83%E3%83%97_diff htm (1)](https://user-images.githubusercontent.com/49807271/195984995-ad78a316-8490-43c6-a42f-98f31c358ffe.png)

本ファイルに適用されている設定を設定ファイルを確認します。

```
{
  "caseSensitive": false,
  "collapseBooleanAttributes": true,
  "collapseInlineTagWhitespace": false,
  "collapseWhitespace": true,
  "conservativeCollapse": false,
  "continueOnParseError": true,
  "customAttrCollapse": ".*",
  "decodeEntities": true,
  "html5": true,
  "ignoreCustomFragments": [
    "<#[\\s\\S]*?#>",
    "<%[\\s\\S]*?%>",
    "<\\?[\\s\\S]*?\\?>"
  ],
  "includeAutoGeneratedTags": false,
  "keepClosingSlash": false,
  "maxLineLength": 0,
  "minifyCSS": true,
  "minifyJS": true,
  "preserveLineBreaks": false,
  "preventAttributesEscaping": false,
  "processConditionalComments": true,
  "processScripts": [
    "text/html"
  ],
  "removeAttributeQuotes": true,
  "removeComments": true,
  "removeEmptyAttributes": true,
  "removeEmptyElements": true,
  "removeOptionalTags": true,
  "removeRedundantAttributes": true,
  "removeScriptTypeAttributes": true,
  "removeStyleLinkTypeAttributes": true,
  "removeTagWhitespace": true,
  "sortAttributes": true,
  "sortClassName": true,
  "trimCustomFragments": true,
  "useShortDoctype": true
}
```
